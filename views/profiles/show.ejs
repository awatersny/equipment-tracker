<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/style.css">
<%- include('../partials/nav') %>

<main>
  <h1><%= profile.name %>'s Inventory</h1>
  <ul>
    <% profile.ownedItems.forEach(item => { %>
        <li class="item">
          <span>Item: <%= item.name %></span>
          <span>Condition: <%= item.condition %></span>
          <span>Status: <%= item.available ? "Available" : "Unavailable" %></span>
          <span>Requested: <%= item.requested ? "Yes" : "No" %></span>
          <div id="buttons">
            <a 
              href="/profiles/<%= profile._id %>/items/<%= item._id %> "
              id="item-details"
            >
              Item Details
            </a>
            <% if (isSelf) { %>
              <form 
                action="/profiles/<%= profile._id %>/?_method=PUT"
                method="POST"
              >
                <button type="submit">Edit Item</button>
              </form>
              <form 
                action="/profiles/<%= profile._id %>/?_method=DELETE"
                method="POST"
              >
                <button type="submit" id="delete">Delete Item</button>
              </form>
            <% } else { %>
              <form 
                action="/profiles/<%= profile._id %>/?_method=PATCH"
                method="POST"
              >
                <button type="submit">Request Item</button>
              </form>
            <% } %> 
          </div>
        </li>
    <% }) %>
  </ul>
</main>

<%- include('../partials/footer') %> 